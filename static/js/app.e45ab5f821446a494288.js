webpackJsonp([1],{"+ef1":function(e,t){},"1bzR":function(e,t){},"9SSi":function(e,t){},G5Vt:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("mvHQ"),r=n.n(s),o=n("Dd8w"),i=n.n(o),c=n("Gu7T"),l=n.n(c),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("label",[this._t("label"),this._v(" "),t("br"),this._v(" "),t("button",{staticClass:"cursor-pointer"},[this._t("default")],2)],2)])},staticRenderFns:[]};var f=n("VU/8")({name:"BaseButton"},u,!1,function(e){n("Y4vh")},"data-v-c3dd73cc",null).exports,d={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"container"},[this._t("default")],2)},staticRenderFns:[]};var m=n("VU/8")({name:"BaseContainer"},d,!1,function(e){n("G5Vt")},"data-v-d963df90",null).exports,p={name:"BaseInput",props:{label:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Number,default:0}},methods:{updateValue:function(e){this.$emit("input",Number(e.target.value))}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("label",{staticClass:"cursor-pointer"},[this._v("\n    "+this._s(this.label)+"\n    "),t("br"),this._v(" "),t("input",{attrs:{placeholder:this.placeholder,min:"0",type:"number"},domProps:{value:this.value},on:{input:this.updateValue}})])])},staticRenderFns:[]};var h=n("VU/8")(p,v,!1,function(e){n("9SSi")},"data-v-83ea7c96",null).exports,_={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]};var b=n("VU/8")({name:"BaseLabel"},_,!1,function(e){n("mBe2")},"data-v-15d3d870",null).exports,g={success:"success",error:"error"},S="Поля обновлены",y="Нажали на кнопку сохранить",E="Результат сохранен",F="Сумма должна быть четной!",C={name:"TheInformation",computed:{MESSAGE_TYPES:function(){return g}},props:{events:{type:Array,default:function(){return[]}}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",e._l(e.events,function(t,a){return n("li",{key:t+"-"+a,class:t.type===e.MESSAGE_TYPES.success?e.MESSAGE_TYPES.success:e.MESSAGE_TYPES.error},[e._v("\n      "+e._s(t.date)+" :: "+e._s(t.message)+" :: "+e._s(t.data)+"\n    ")])}),0)])},staticRenderFns:[]};var x={name:"App",components:{BaseContainer:m,TheInformation:n("VU/8")(C,T,!1,function(e){n("+ef1")},"data-v-5b9897ac",null).exports,BaseLabel:b,BaseButton:f,BaseInput:h},data:function(){return{form:{price:0,qty:0,amount:0},nonce:0,events:[],localStorageData:"",firstFieldChanged:""}},computed:{reversedEvents:function(){return[].concat(l()(this.events)).reverse()}},methods:{updateFields:function(e,t){this.firstFieldChanged||(this.firstFieldChanged=e),this.debounceCalculation(e,t)},calculateFields:function(e,t){if(this.firstFieldChanged){var n=this.form,a=n.price,s=n.qty;switch(this.firstFieldChanged){case"price":a&&s&&(this.form.amount=a*s);break;case"qty":s&&a&&(this.form.amount=a*s)}if("amount"===e){var r=Number(t);"price"===this.firstFieldChanged?this.form.price=r/s:this.form.qty=r/a,this.form.amount=r}}this.logEvent({message:S,data:this.form,type:g.success})},debounceCalculation:function(e,t){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(this.calculateFields(e,t),300)},handleSubmit:function(){this.logEvent({message:y,data:this.form,type:g.success}),this.saveToLocalStorage()},saveToLocalStorage:function(){var e=this;setTimeout(function(){if(e.form.amount%2==0){e.nonce++;var t=i()({},e.form,{nonce:e.nonce});localStorage.setItem("formData",r()(t)),e.localStorageData=r()(t),e.logEvent({message:E,data:t,type:g.success})}else e.logEvent({message:F,data:e.form,type:g.error})},1e3)},logEvent:function(e){var t=e.message,n=e.data,a=e.type;this.events.push({date:(new Date).toLocaleTimeString(),message:t,data:r()(n),type:a})}},created:function(){if(this.localStorageData=localStorage.getItem("formData")||"",this.localStorageData){var e=JSON.parse(this.localStorageData),t=e.price,n=e.qty,a=e.amount,s=e.nonce;this.form.price=t,this.form.qty=n,this.form.amount=a,this.nonce=s}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"cols"},[n("base-input",{attrs:{label:"Цена",placeholder:"Введите цену"},on:{input:function(t){return e.updateFields("price",t)}},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),n("base-input",{attrs:{label:"Кол-во",placeholder:"Введите кол-во"},on:{input:function(t){return e.updateFields("qty",t)}},model:{value:e.form.qty,callback:function(t){e.$set(e.form,"qty",t)},expression:"form.qty"}}),e._v(" "),n("base-input",{attrs:{label:"Сумма",placeholder:"Введите сумму"},on:{input:function(t){return e.updateFields("amount",t)}},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}}),e._v(" "),n("base-button",{nativeOn:{click:function(t){return e.handleSubmit.apply(null,arguments)}},scopedSlots:e._u([{key:"label",fn:function(){},proxy:!0},{key:"default",fn:function(){return[e._v("Рассчитать")]},proxy:!0}])})],1),e._v(" "),n("div",{staticClass:"cols mt-10"},[n("base-label",[e._v(e._s(e.form.price))]),e._v(" "),n("base-label",[e._v(e._s(e.form.qty))]),e._v(" "),n("base-label",[e._v(e._s(e.form.amount))]),e._v(" "),n("base-label",[e._v(e._s(e.localStorageData))])],1),e._v(" "),n("base-container",{staticClass:"mt-10",scopedSlots:e._u([{key:"default",fn:function(){return[n("the-information",{attrs:{events:e.reversedEvents}})]},proxy:!0}])})],1)},staticRenderFns:[]};var q=n("VU/8")(x,B,!1,function(e){n("1bzR")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:q},template:"<App/>"})},Y4vh:function(e,t){},mBe2:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e45ab5f821446a494288.js.map